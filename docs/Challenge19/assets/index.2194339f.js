var M=Object.defineProperty;var O=(i,e,t)=>e in i?M(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var o=(i,e,t)=>(O(i,typeof e!="symbol"?e+"":e,t),t),$=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var a=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)};var r=(i,e,t)=>($(i,e,"access private method"),t);const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const I of l.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&s(I)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}};j();var c,A,h,f,w,S,g,q,u,L,v,z;const d=class{constructor(e=`.${d.template_placeholder}`,t=document){a(this,c);a(this,h);a(this,w);a(this,g);a(this,u);a(this,v);o(this,"element");o(this,"style");o(this,"classList");const s=r(this,u,L).call(this,e,t);r(this,h,f).call(this,s)?r(this,w,S).call(this,s):this.element=s,r(this,c,A).call(this)}dot(...e){for(let t of e){const s=t[0],n=t[1],l=t[2];(t.length>2&&n!=""||t.length==2)&&this.text(s,n),t.length==3&&this.attr(s,l)}return this}DOM(e=`.${d.template_placeholder}`){return new d(e,this.element)}q(e){return r(this,u,L).call(this,e,this.element)}a(e){return this.element.querySelectorAll(e)}static fromElement(e){var s;const t=new d;return t.element=e,r(s=t,c,A).call(s),t}attr(e,t){this.element.querySelectorAll(e).forEach(s=>r(this,v,z).call(this,s,t))}text(e,t){this.element.querySelectorAll(e).forEach(s=>s.textContent=t)}};let p=d;c=new WeakSet,A=function(){var e,t;this.style=(e=this.element)==null?void 0:e.style,this.classList=(t=this.element)==null?void 0:t.classList},h=new WeakSet,f=function(e){return e==null?void 0:e.classList.contains(d.template_placeholder)},w=new WeakSet,S=function(e){var s;const t=(s=e.lazyParent)!=null?s:e.parentElement;this.element=e.cloneNode(!0),t.append(this.element),r(this,g,q).call(this,e)},g=new WeakSet,q=function(e){r(this,h,f).call(this,this.element)&&this.element.classList.remove(d.template_placeholder),e.lazyParent||(e.lazyParent=e.parentElement),r(this,h,f).call(this,e)&&e.remove()},u=new WeakSet,L=function(e,t){d.CACHE.has(t)||d.CACHE.set(t,new Map);const s=d.CACHE.get(t);return s.has(e)||s.set(e,t.querySelector(e)),s.get(e)},v=new WeakSet,z=function(e,t){for(let s in t){const n=[s,t[s]];d.events.includes(s)?e.addEventListener(...n):e.nodeName==="INPUT"&&s==="value"?e.value=t[s]:e.setAttribute(...n)}},o(p,"template_placeholder","lazydom"),o(p,"events",["click","change"]),o(p,"CACHE",new Map);var y,C,E,V,m,N;class U{constructor(e){a(this,y);a(this,E);a(this,m);o(this,"formField",null);o(this,"pwdShown",!1);o(this,"passwdAttributes",{show:{pwdType:"text",pwdImg:"images/hide.svg"},hide:{pwdType:"password",pwdImg:"images/show.svg"}});o(this,"togglePwd",()=>{this.pwdShown?r(this,m,N).call(this,this.passwdAttributes.hide):r(this,m,N).call(this,this.passwdAttributes.show),this.pwdShown=!this.pwdShown,console.log(this.pwdShown)});o(this,"validatePwd",()=>{if(this.formField==null)return;const e=this.pwdInputs[0].value,t=this.pwdInputs[1].value;console.log({password1:e}),console.log({password2:t}),e===t?this.formField.setSuccess():this.formField.setErrors("Confirm Password doesn't match")});this.dom=e,r(this,y,C).call(this),r(this,E,V).call(this)}}y=new WeakSet,C=function(){this.pwdInputs=[this.dom.q('input[name="passwd"]'),this.dom.q('input[name="passwd-repeat"]')],this.pwdTogglers=this.dom.a("a.toggle-pwd"),this.pwdTogglerImgs=this.dom.a("a.toggle-pwd img")},E=new WeakSet,V=function(){this.pwdTogglers.forEach(e=>e.addEventListener("click",this.togglePwd)),this.pwdInputs.forEach(e=>e.addEventListener("change",this.validatePwd))},m=new WeakSet,N=function(e){this.pwdInputs.forEach(t=>t.setAttribute("type",e.pwdType)),this.pwdTogglerImgs.forEach(t=>t.setAttribute("src",e.pwdImg))};class P{constructor(e){this.formField=e}}class B extends P{constructor(){super(...arguments);o(this,"validate",()=>{const t=this.formField.input.value;t!=null&&t!=""?this.formField.setSuccess():this.formField.setErrors(`Input ${this.formField.inputName} is required!`)})}}class K extends P{constructor(){super(...arguments);o(this,"validate",()=>{const t=this.formField.input.value;t!=null&&t.includes("@")?this.formField.setSuccess():this.formField.setErrors("Please input a valid e-mail address.")})}}class R extends P{constructor(){super(...arguments);o(this,"validate",()=>{this.formField.input.value.length>=8?this.formField.setSuccess():this.formField.setErrors("Password less than 8 characters.")})}}var b,T,x,k,F,H;class G{constructor(e){a(this,b);a(this,x);a(this,F);o(this,"validators",{name:B,email:K,passwd:R});this.dom=p.fromElement(e),r(this,b,T).call(this),this.inputName!=="NONAME"&&(r(this,x,k).call(this),r(this,F,H).call(this))}setSuccess(){this.errorsIcon.classList.add("hide"),this.successIcon.classList.remove("hide")}setErrors(e){this.errorsIcon.classList.remove("hide"),this.successIcon.classList.add("hide"),this.errorsMsg.textContent=e}}b=new WeakSet,T=function(){var e,t;this.input=this.dom.q("input"),this.inputName=(t=(e=this.input)==null?void 0:e.getAttribute("name"))!=null?t:"NONAME",this.successIcon=this.dom.q(".success"),this.errorsIcon=this.dom.q(".errors"),this.errorsMsg=this.dom.q(".errors .msg")},x=new WeakSet,k=function(){[this.successIcon,this.errorsIcon].forEach(t=>t.classList.add("hide"))},F=new WeakSet,H=function(){if(!(this.inputName in this.validators))return;const e=new this.validators[this.inputName](this);this.input.addEventListener("focusout",e.validate)};class J{constructor(){o(this,"dom",new p("#app"));o(this,"pwdHandler",new U(this.dom));o(this,"inputFields",new Array);for(const e of this.dom.a(".field")){const t=new G(e);this.inputFields.push(t),t.inputName==="passwd-repeat"&&(this.pwdHandler.formField=t)}}}new J;
