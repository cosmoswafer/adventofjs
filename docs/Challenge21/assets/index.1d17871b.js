var x=Object.defineProperty;var y=(n,e,t)=>e in n?x(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var o=(n,e,t)=>(y(n,typeof e!="symbol"?e+"":e,t),t),v=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var i=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var p=(n,e,t)=>(v(n,e,"access private method"),t);import{DOM as I}from"https://jimmy09140456.github.io/lazydom/dom.js";const w=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))g(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&g(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function g(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};w();const m=class{static currencyFormatter(e){return m.usdFormatter.format(e)}};let a=m;o(a,"usdFormatter",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}));var c,f;class E{constructor(e){i(this,c);o(this,"budgetAmountInput",document.querySelector("#budget-amount"));o(this,"budgetIncomeTxt",document.querySelector("#app > .balance .income .currency"));o(this,"amount",0);o(this,"changeBudgetAmount",()=>{this.amount=Number(this.budgetAmountInput.value),this.renderIncome(),this.notifier()});this.notifier=e,p(this,c,f).call(this),this.renderIncome()}renderIncome(){this.budgetIncomeTxt.textContent=a.currencyFormatter(this.amount)}}c=new WeakSet,f=function(){this.budgetAmountInput.addEventListener("change",this.changeBudgetAmount)};var d,h,l,b;class A{constructor(e){i(this,d);i(this,l);o(this,"expenseUl",new I("#app > .expenses ul.items"));o(this,"expenseName",document.querySelector("#expense-name"));o(this,"expenseAmount",document.querySelector("#expense-amount"));o(this,"addExpenseBtn",document.querySelector("#app > .budget .add-btn a"));o(this,"totalExpenseText",document.querySelector("#app > .balance .expenses .currency"));o(this,"expenseItems",new Array);o(this,"renderNewItem",()=>{const e=this.expenseItems.length,t=this.expenseUl.DOM();t.dot([".name",this.expenseName.value],[".amount",a.currencyFormatter(this.expenseAmount.value)]),t.q(".trash a").addEventListener("click",()=>this.removeItem(e)),this.expenseItems.push({key:e,dom:t,amount:Number(this.expenseAmount.value),isTrash:!1}),console.log("Added new item at",e),this.renderExpenses(),this.notifier()});this.notifier=e,p(this,l,b).call(this),p(this,d,h).call(this)}removeItem(e){const t=this.expenseItems[e];t.key===e&&(t.dom.element.remove(),t.isTrash=!0),this.renderExpenses(),this.notifier()}renderExpenses(){let e=0;for(let t of this.expenseItems)t.isTrash===!1&&(e+=t.amount);this.totalExpenseText.textContent=a.currencyFormatter(e)}}d=new WeakSet,h=function(){this.expenseUl.DOM().element.remove(),this.renderExpenses()},l=new WeakSet,b=function(){this.addExpenseBtn.addEventListener("click",()=>this.renderNewItem())};class T{constructor(){o(this,"balanceText",document.querySelector("#app > .balance .balance .currency"));o(this,"notify",()=>{console.log("Render balance..."),console.log("Budget amount:",this.budget.amount);let e=this.budget.amount;for(let t of this.expense.expenseItems)console.log(`${t.key}: ${t.amount}`),t.isTrash===!1&&(e-=t.amount);console.log({balance:e}),this.renderBalance(e)});this.budget=new E(this.notify),this.expense=new A(this.notify),this.renderBalance(0)}renderBalance(e){this.balanceText.textContent=a.currencyFormatter(e),this.balanceText.classList.remove("positive","negative"),e>=0?this.balanceText.classList.add("positive"):this.balanceText.classList.add("negative")}}new T;
