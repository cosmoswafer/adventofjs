var N=Object.defineProperty;var B=(i,e,t)=>e in i?N(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var r=(i,e,t)=>(B(i,typeof e!="symbol"?e+"":e,t),t),F=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var c=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)};var o=(i,e,t)=>(F(i,e,"access private method"),t);const P=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const E of a.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&n(E)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}};P();var m,I,u,f,g,z,x,k,h,A,b,S;const l=class{constructor(e=`.${l.template_placeholder}`,t=document){c(this,m);c(this,u);c(this,g);c(this,x);c(this,h);c(this,b);r(this,"element");r(this,"style");r(this,"classList");const n=o(this,h,A).call(this,e,t);o(this,u,f).call(this,n)?o(this,g,z).call(this,n):this.element=n,o(this,m,I).call(this)}dot(...e){for(let t of e){const n=t[0],s=t[1],a=t[2];(t.length>2&&s!=""||t.length==2)&&this.text(n,s),t.length==3&&this.attr(n,a)}return this}DOM(e=`.${l.template_placeholder}`){return new l(e,this.element)}q(e){return o(this,h,A).call(this,e,this.element)}a(e){return this.element.querySelectorAll(e)}static fromElement(e){var n;const t=new l;return t.element=e,o(n=t,m,I).call(n),t}attr(e,t){this.element.querySelectorAll(e).forEach(n=>o(this,b,S).call(this,n,t))}text(e,t){this.element.querySelectorAll(e).forEach(n=>n.textContent=t)}};let d=l;m=new WeakSet,I=function(){var e,t;this.style=(e=this.element)==null?void 0:e.style,this.classList=(t=this.element)==null?void 0:t.classList},u=new WeakSet,f=function(e){return e==null?void 0:e.classList.contains(l.template_placeholder)},g=new WeakSet,z=function(e){var n;const t=(n=e.lazyParent)!=null?n:e.parentElement;this.element=e.cloneNode(!0),t.append(this.element),o(this,x,k).call(this,e)},x=new WeakSet,k=function(e){o(this,u,f).call(this,this.element)&&this.element.classList.remove(l.template_placeholder),e.lazyParent||(e.lazyParent=e.parentElement),o(this,u,f).call(this,e)&&e.remove()},h=new WeakSet,A=function(e,t){l.CACHE.has(t)||l.CACHE.set(t,new Map);const n=l.CACHE.get(t);return n.has(e)||n.set(e,t.querySelector(e)),n.get(e)},b=new WeakSet,S=function(e,t){for(let n in t){const s=[n,t[n]];l.events.includes(n)?e.addEventListener(...s):e.nodeName==="INPUT"&&n==="value"?e.value=t[n]:e.setAttribute(...s)}},r(d,"template_placeholder","lazydom"),r(d,"events",["click","change"]),r(d,"CACHE",new Map);const L=class{static currencyFormatter(e){return L.usdFormatter.format(e)}};let p=L;r(p,"usdFormatter",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}));var y,q;class U{constructor(e){c(this,y);r(this,"budgetAmountInput",document.querySelector("#budget-amount"));r(this,"budgetIncomeTxt",document.querySelector("#app > .balance .income .currency"));r(this,"amount",0);r(this,"changeBudgetAmount",()=>{this.amount=Number(this.budgetAmountInput.value),this.renderIncome(),this.notifier()});this.notifier=e,o(this,y,q).call(this),this.renderIncome()}renderIncome(){this.budgetIncomeTxt.textContent=p.currencyFormatter(this.amount)}}y=new WeakSet,q=function(){this.budgetAmountInput.addEventListener("change",this.changeBudgetAmount)};var v,T,w,C;class H{constructor(e){c(this,v);c(this,w);r(this,"expenseUl",new d("#app > .expenses ul.items"));r(this,"expenseName",document.querySelector("#expense-name"));r(this,"expenseAmount",document.querySelector("#expense-amount"));r(this,"addExpenseBtn",document.querySelector("#app > .budget .add-btn a"));r(this,"totalExpenseText",document.querySelector("#app > .balance .expenses .currency"));r(this,"expenseItems",new Array);r(this,"renderNewItem",()=>{const e=this.expenseItems.length,t=this.expenseUl.DOM();t.dot([".name",this.expenseName.value],[".amount",p.currencyFormatter(this.expenseAmount.value)]),t.q(".trash a").addEventListener("click",()=>this.removeItem(e)),this.expenseItems.push({key:e,dom:t,amount:Number(this.expenseAmount.value),isTrash:!1}),console.log("Added new item at",e),this.renderExpenses(),this.notifier()});this.notifier=e,o(this,w,C).call(this),o(this,v,T).call(this)}removeItem(e){const t=this.expenseItems[e];t.key===e&&(t.dom.element.remove(),t.isTrash=!0),this.renderExpenses(),this.notifier()}renderExpenses(){let e=0;for(let t of this.expenseItems)t.isTrash===!1&&(e+=t.amount);this.totalExpenseText.textContent=p.currencyFormatter(e)}}v=new WeakSet,T=function(){this.expenseUl.DOM().element.remove(),this.renderExpenses()},w=new WeakSet,C=function(){this.addExpenseBtn.addEventListener("click",()=>this.renderNewItem())};class ${constructor(){r(this,"balanceText",document.querySelector("#app > .balance .balance .currency"));r(this,"notify",()=>{console.log("Render balance..."),console.log("Budget amount:",this.budget.amount);let e=this.budget.amount;for(let t of this.expense.expenseItems)console.log(`${t.key}: ${t.amount}`),t.isTrash===!1&&(e-=t.amount);console.log({balance:e}),this.renderBalance(e)});this.budget=new U(this.notify),this.expense=new H(this.notify),this.renderBalance(0)}renderBalance(e){this.balanceText.textContent=p.currencyFormatter(e),this.balanceText.classList.remove("positive","negative"),e>=0?this.balanceText.classList.add("positive"):this.balanceText.classList.add("negative")}}new $;
